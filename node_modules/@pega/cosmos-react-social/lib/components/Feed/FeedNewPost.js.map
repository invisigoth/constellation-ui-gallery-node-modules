{"version":3,"file":"FeedNewPost.js","sourceRoot":"","sources":["../../../src/components/Feed/FeedNewPost.tsx"],"names":[],"mappings":";AAAA,OAAO,EAAM,QAAQ,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAC7C,OAAO,MAAM,MAAM,mBAAmB,CAAC;AAEvC,OAAO,EACL,YAAY,EACZ,gBAAgB,EAChB,UAAU,EAEV,qBAAqB,EACtB,MAAM,yBAAyB,CAAC;AAEjC,OAAO,KAAK,SAAS,MAAM,8DAA8D,CAAC;AAC1F,OAAO,KAAK,aAAa,MAAM,mEAAmE,CAAC;AAEnG,OAAO,mBAAmB,MAAM,uBAAuB,CAAC;AAExD,OAAO,eAAe,MAAM,mBAAmB,CAAC;AAEhD,YAAY,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;AAEvC,MAAM,CAAC,MAAM,iBAAiB,GAAG,MAAM,CAAC,GAAG,CAAA,EAAE,CAAC;AAE9C,iBAAiB,CAAC,YAAY,GAAG,gBAAgB,CAAC;AAElD,MAAM,WAAW,GAAwC,CAAC,KAAuB,EAAE,EAAE;IACnF,MAAM,EACJ,EAAE,EACF,WAAW,GAAG,EAAE,EAChB,QAAQ,EACR,YAAY,EACZ,SAAS,EACT,UAAU,EACV,iBAAiB,EACjB,GAAG,SAAS,EACb,GAAG,KAAK,CAAC;IACV,MAAM,MAAM,GAAG,MAAM,EAAuB,CAAC;IAC7C,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAW,MAAM,CAAC,CAAC;IAC3D,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAClE,MAAM,CAAC,kBAAkB,EAAE,qBAAqB,CAAC,GAAG,QAAQ,CAAsB,EAAE,CAAC,CAAC;IACtF,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,UAAU,EAAkB,CAAC;IAE/D,qBAAqB,CAAC,GAAG,EAAE;QACzB,IAAI,QAAQ,KAAK,MAAM,EAAE;YACvB,MAAM,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC;SACzB;QACD,IAAI,QAAQ,KAAK,SAAS,EAAE;YAC1B,qBAAqB,CAAC,EAAyB,CAAC,CAAC;SAClD;IACH,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;IAEf,OAAO,CACL,MAAC,iBAAiB,IAAC,GAAG,EAAE,YAAY,KAAM,SAAS,aAChD,iBAAiB,IAAI,CACpB,KAAC,mBAAmB,IAClB,UAAU,EAAE,UAAU,IAAK,EAAsC,EACjE,aAAa,EAAE,WAAW,EAC1B,0BAA0B,EAAE,qBAAqB,EACjD,iBAAiB,EAAE,iBAAiB,EACpC,KAAK,EAAE,iBAAiB,EACxB,OAAO,EAAE,GAAG,EAAE,CAAC,oBAAoB,CAAC,KAAK,CAAC,GAC1C,CACH,EAED,KAAC,eAAe,IACd,OAAO,EAAC,MAAM,KACV,EAAE,EAAE,EAAE,WAAW,EAAE,YAAY,EAAE,QAAQ,EAAE,EAC/C,aAAa,EAAE,SAAS,EACxB,MAAM,EAAE,MAAM,EACd,kBAAkB,EAAE,kBAAkB,GACtC,IACgB,CACrB,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,WAAW,CAAC","sourcesContent":["import { FC, useState, useRef } from 'react';\nimport styled from 'styled-components';\n\nimport {\n  registerIcon,\n  defaultThemeProp,\n  useElement,\n  ForwardProps,\n  useAfterInitialEffect\n} from '@pega/cosmos-react-core';\nimport { RichTextEditorState } from '@pega/cosmos-react-rte';\nimport * as timesIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/times.icon';\nimport * as paperClipIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/paper-clip.icon';\n\nimport FeedNewPostTypeMenu from './FeedNewPostTypeMenu';\nimport { FeedNewPostProps, PostType, PostTypeMenuProps, RecipientMenuItem } from './Feed.types';\nimport FeedInputRegion from './FeedInputRegion';\n\nregisterIcon(timesIcon, paperClipIcon);\n\nexport const StyledFeedNewPost = styled.div``;\n\nStyledFeedNewPost.defaultProps = defaultThemeProp;\n\nconst FeedNewPost: FC<ForwardProps & FeedNewPostProps> = (props: FeedNewPostProps) => {\n  const {\n    id,\n    attachments = [],\n    onSubmit,\n    onFilesAdded,\n    autoFocus,\n    recipients,\n    onRecipientSearch,\n    ...restProps\n  } = props;\n  const rteRef = useRef<RichTextEditorState>();\n  const [postType, setPostType] = useState<PostType>('post');\n  const [resetPostTypeMenu, setResetPostTypeMenu] = useState(false);\n  const [selectedRecipients, setSelectedRecipients] = useState<RecipientMenuItem[]>([]);\n  const [newPostEl, setNewPostEl] = useElement<HTMLDivElement>();\n\n  useAfterInitialEffect(() => {\n    if (postType === 'post') {\n      rteRef.current?.focus();\n    }\n    if (postType !== 'private') {\n      setSelectedRecipients([] as RecipientMenuItem[]);\n    }\n  }, [postType]);\n\n  return (\n    <StyledFeedNewPost ref={setNewPostEl} {...restProps}>\n      {onRecipientSearch && (\n        <FeedNewPostTypeMenu\n          recipients={recipients || ([] as PostTypeMenuProps['recipients'])}\n          onSetPostType={setPostType}\n          onSelectedRecipientsUpdate={setSelectedRecipients}\n          onRecipientSearch={onRecipientSearch}\n          reset={resetPostTypeMenu}\n          onReset={() => setResetPostTypeMenu(false)}\n        />\n      )}\n\n      <FeedInputRegion\n        variant='post'\n        {...{ id, attachments, onFilesAdded, onSubmit }}\n        inputRegionEl={newPostEl}\n        rteRef={rteRef}\n        selectedRecipients={selectedRecipients}\n      />\n    </StyledFeedNewPost>\n  );\n};\n\nexport default FeedNewPost;\n"]}