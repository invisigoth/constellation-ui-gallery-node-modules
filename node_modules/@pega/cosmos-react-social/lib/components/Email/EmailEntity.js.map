{"version":3,"file":"EmailEntity.js","sourceRoot":"","sources":["../../../src/components/Email/EmailEntity.tsx"],"names":[],"mappings":"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","sourcesContent":["import { forwardRef, FunctionComponent, PropsWithoutRef, useRef } from 'react';\nimport { render, unmountComponentAtNode } from 'react-dom';\n\nimport {\n  ForwardProps,\n  Tooltip,\n  useConsolidatedRef,\n  useElement,\n  useI18n,\n  useConfiguration,\n  formatListToLocaleString,\n  Icon\n} from '@pega/cosmos-react-core';\n\nimport { StyledEmailEntity } from './Email.styles';\nimport { EmailEntityProps } from './Email.types';\n\nconst EmailEntity: FunctionComponent<EmailEntityProps & ForwardProps> = forwardRef(\n  function EmailEntity(\n    { entity, ...restProps }: PropsWithoutRef<EmailEntityProps>,\n    ref: EmailEntityProps['ref']\n  ) {\n    const [el, setEl] = useElement<HTMLElement>();\n    const elementRef = useConsolidatedRef<HTMLElement>(setEl, ref);\n    const t = useI18n();\n    const { locale } = useConfiguration();\n    const tooltipRef = useRef<HTMLDivElement>(null);\n    return (\n      <StyledEmailEntity\n        {...restProps}\n        entity={entity}\n        ref={elementRef}\n        aria-label={\n          Array.isArray(entity.description)\n            ? formatListToLocaleString(entity.description, t, locale)\n            : entity.description\n        }\n        onContextMenu={() => {\n          if (tooltipRef.current) tooltipRef.current.hidden = true;\n        }}\n        contentEditable={false}\n      >\n        {entity.value}\n        {entity.icon && <Icon name={entity.icon} />}\n        {entity.description && entity.description.length > 0 && (\n          <Tooltip target={el} ref={tooltipRef} hideDelay='short'>\n            {Array.isArray(entity.description)\n              ? formatListToLocaleString(entity.description, t, locale, {\n                  separator: '\\n'\n                })\n              : entity.description}\n          </Tooltip>\n        )}\n      </StyledEmailEntity>\n    );\n  }\n);\n\nexport class EmailEntityWeb extends HTMLElement {\n  removeElements() {\n    while (this.firstChild) {\n      this.removeChild(this.firstChild);\n    }\n  }\n\n  connectedCallback() {\n    const inner = this.innerHTML;\n    this.removeElements();\n    const variant = Number(this.getAttribute('data-variant'));\n    const descAttribute = this.getAttribute('data-description');\n    const description = descAttribute !== null ? JSON.parse(descAttribute) : undefined;\n    const type = this.getAttribute('data-type') || '';\n    render(\n      <EmailEntity\n        entity={{\n          value: inner,\n          type,\n          variant,\n          description\n        }}\n      />,\n      this\n    );\n  }\n\n  disconnectedCallback() {\n    unmountComponentAtNode(this);\n  }\n}\n\nif (!customElements.get('pega-email-entity')) {\n  customElements.define('pega-email-entity', EmailEntityWeb);\n}\n\nexport default EmailEntity;\n"]}