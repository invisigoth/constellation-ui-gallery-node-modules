{"version":3,"file":"Email.js","sourceRoot":"","sources":["../../../src/components/Email/Email.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  forwardRef,\n  Fragment,\n  FunctionComponent,\n  PropsWithoutRef,\n  ReactNode,\n  useRef,\n  useState,\n  useMemo,\n  useEffect,\n  MouseEvent,\n  useImperativeHandle\n} from 'react';\n\nimport {\n  ForwardProps,\n  Text,\n  SummaryItem,\n  Avatar,\n  Flex,\n  EmailDisplay,\n  Button,\n  Icon,\n  FieldValueListProps,\n  Sentiment,\n  useOuterEvent,\n  Popover,\n  useElement,\n  CardContent,\n  useI18n,\n  FileDisplay,\n  useBreakpoint,\n  DateTimeDisplay,\n  useConfiguration,\n  MetaList,\n  MetaListProps,\n  useScrollToggle,\n  Status,\n  Banner,\n  useTheme,\n  useEscape,\n  HTML\n} from '@pega/cosmos-react-core';\nimport { RichTextViewer } from '@pega/cosmos-react-rte';\n\nimport ContextMenuPopover from './ContextMenuPopover';\nimport { EmailUser, EmailProps, TargetProps, ContextMenuProps } from './Email.types';\nimport {\n  StyledEmail,\n  StyledEmailDisplay,\n  StyledEmailHeader,\n  StyledFromEmailDisplay,\n  StyledEmailMoreInfoButton,\n  StyledEmailMoreInfoPopover,\n  StyledEmailPrimaryFieldValueList,\n  StyledEmailBody,\n  StyledEmailSecondaryFieldValueList,\n  StyledSuggestedRepliesButton,\n  StyledSuggestedRepliesMenuButton,\n  StyledForwardedContentToggle,\n  StyledEmailActions\n} from './Email.styles';\nimport highlightEntities from './utils/EntityHighlighter';\nimport './EmailEntity';\n\nconst EmailDisplayList = ({\n  emailUsers,\n  showEmailAddress,\n  showShortName\n}: {\n  emailUsers: EmailUser[];\n  showEmailAddress?: boolean;\n  showShortName?: boolean;\n}) => {\n  return (\n    <>\n      {emailUsers.map(({ emailAddress, fullName, shortName }, i) => (\n        <Fragment key={emailAddress}>\n          {i === 0 ? '' : '; '}\n          <EmailDisplay\n            value={emailAddress}\n            displayText={`${showShortName ? shortName : fullName}${\n              showEmailAddress ? ` <${emailAddress}>` : ''\n            }`}\n            variant='text'\n            as={StyledEmailDisplay}\n          />\n        </Fragment>\n      ))}\n    </>\n  );\n};\n\nconst OVERFLOW_TO_EMAIL_COUNT = 2;\nconst OVERFLOW_EMAIL_SUGGESTION_COUNT = 2;\n\nconst Email: FunctionComponent<EmailProps & ForwardProps> = forwardRef(function Email(\n  props: PropsWithoutRef<EmailProps>,\n  ref: EmailProps['ref']\n) {\n  const {\n    id,\n    from,\n    to = [],\n    cc = [],\n    bcc = [],\n    timeStamp,\n    sentiment,\n    subject,\n    forwardedContent,\n    attachments = [],\n    suggestions = [],\n    entityHighlightMapping = [],\n    onReply,\n    onForward,\n    onReplyAll,\n    onEditDraft,\n    onDeleteDraft,\n    onSuggestionClick,\n    contextMenu,\n    status,\n    banner,\n    body,\n    ...restProps\n  } = props;\n  const t = useI18n();\n  const theme = useTheme();\n\n  const [emailMoreInfoBtnRef, setEmailMoreInfoBtnRef] = useElement<HTMLButtonElement>(null);\n  const [showEmailMoreInfo, setShowEmailMoreInfo] = useState(false);\n  const [showForwardedContent, setShowForwardedContent] = useState(false);\n  const [emailMoreInfoPopover, setEmailMoreInfoPopover] = useElement<HTMLDivElement>(null);\n  const emailMoreInfoFields: FieldValueListProps['fields'] = [];\n  // Only way to set this is through imperative handle\n  const [contextMenuItems, setContextMenuItems] = useState<ContextMenuProps['items']>([]);\n  const [contextMenuLoading, setContextMenuLoading] = useState<boolean>(false);\n\n  const [contextMenuPopoverOpen, setContextMenuPopoverOpen] = useState(false);\n  const { disableScroll, enableScroll } = useScrollToggle();\n  const [contextMenuPopoverEl, setContextMenuPopoverEl] = useElement<HTMLElement>();\n\n  useImperativeHandle(contextMenu?.handle, () => ({\n    setItems: (ctxMenuItems: ContextMenuProps['items']) => {\n      setContextMenuItems(ctxMenuItems || []);\n    },\n    setLoading(loading) {\n      setContextMenuLoading(loading);\n    },\n    setOpen(visible) {\n      setContextMenuPopoverOpen(visible);\n    }\n  }));\n\n  const headerRef = useRef<HTMLDivElement>(null);\n  const isSmallOrAbove = useBreakpoint('sm', {\n    breakpointRef: headerRef,\n    themeProp: 'content-width'\n  });\n  const { locale } = useConfiguration();\n  const [currentTarget, setCurrentTarget] = useState<TargetProps | undefined>();\n\n  useOuterEvent('mousedown', [contextMenuPopoverEl], () => {\n    if (contextMenuPopoverOpen) setContextMenuPopoverOpen(false);\n  });\n\n  // Handler for right click on email body\n  const onContextMenu = (e: MouseEvent<HTMLDivElement>) => {\n    if (e.target instanceof HTMLElement && e.target.textContent?.trim()) {\n      setCurrentTarget({\n        targetNode: e.target,\n        cursorPosition: {\n          x: e.pageX - window.scrollX,\n          y: e.pageY - window.scrollY\n        }\n      });\n    }\n    contextMenu?.onContextMenu(id, e);\n  };\n\n  const onItemClick: ContextMenuProps['onItemClick'] = (selectedValue: {\n    fieldName: string;\n    fieldValue: string;\n  }) => {\n    setContextMenuPopoverOpen(false);\n    contextMenu?.onItemClick(selectedValue);\n  };\n\n  if (from) {\n    emailMoreInfoFields.push({\n      id: 'from',\n      name: t('from'),\n      value: from.emailAddress\n    });\n  }\n\n  if (to.length > 0) {\n    emailMoreInfoFields.push({\n      id: 'to',\n      name: t('to'),\n      value: <EmailDisplayList emailUsers={to} showEmailAddress />\n    });\n  }\n\n  if (cc.length > 0) {\n    emailMoreInfoFields.push({\n      id: 'cc',\n      name: 'CC',\n      value: <EmailDisplayList emailUsers={cc} showEmailAddress />\n    });\n  }\n\n  if (bcc.length > 0) {\n    emailMoreInfoFields.push({\n      id: 'BCC',\n      name: 'BCC',\n      value: <EmailDisplayList emailUsers={bcc} showEmailAddress />\n    });\n  }\n\n  if (timeStamp) {\n    emailMoreInfoFields.push({\n      id: 'date',\n      name: t('date'),\n      value: (\n        <Text>\n          {`${new Intl.DateTimeFormat(locale, { weekday: 'short' }).format(new Date(timeStamp))}, `}\n          <DateTimeDisplay variant='datetime' format='short' value={timeStamp} />\n        </Text>\n      )\n    });\n  }\n\n  useOuterEvent('mousedown', [emailMoreInfoPopover], () => {\n    setShowEmailMoreInfo(false);\n  });\n\n  useEscape(() => {\n    setShowEmailMoreInfo(false);\n  });\n\n  const secondaryFields: FieldValueListProps['fields'] = [];\n\n  if (attachments.length > 0) {\n    secondaryFields.push({\n      id: 'attachments',\n      name: '',\n      value: (\n        <Flex container={{ gap: 1, wrap: 'wrap' }}>\n          {attachments.map(attachmentProps => (\n            <FileDisplay {...attachmentProps} key={attachmentProps.value} />\n          ))}\n        </Flex>\n      )\n    });\n  }\n\n  if (suggestions.length > 0) {\n    secondaryFields.push({\n      id: 'suggested_replies',\n      name: '',\n      value: (\n        <Flex container={{ wrap: 'wrap' }}>\n          {suggestions\n            .slice(0, OVERFLOW_EMAIL_SUGGESTION_COUNT)\n            .map(({ id: suggestionId, title }) => (\n              <StyledSuggestedRepliesButton\n                variant='secondary'\n                key={suggestionId}\n                onClick={() => {\n                  onSuggestionClick?.(id, suggestionId);\n                }}\n              >\n                {title}\n              </StyledSuggestedRepliesButton>\n            ))}\n          {suggestions.length > OVERFLOW_EMAIL_SUGGESTION_COUNT && (\n            <StyledSuggestedRepliesMenuButton\n              text={t('other_responses')}\n              key='other_responses'\n              variant='secondary'\n              menu={{\n                items: suggestions\n                  .slice(OVERFLOW_EMAIL_SUGGESTION_COUNT)\n                  .map(({ id: suggestionId, title }) => {\n                    return {\n                      primary: title,\n                      id: suggestionId,\n                      onClick: () => {\n                        onSuggestionClick?.(id, suggestionId);\n                      }\n                    };\n                  })\n              }}\n            />\n          )}\n        </Flex>\n      )\n    });\n  }\n\n  let renderedBody: ReactNode = body;\n\n  renderedBody = useMemo(() => {\n    // Apply entity highlighting only on string body\n    if (typeof body === 'string') {\n      let bodyString = body;\n\n      if (subject) {\n        bodyString = `<div style=\"font-weight: ${theme.base['font-weight']['semi-bold']}\">${t(\n          'subject_label',\n          [subject]\n        )}</div><br>${body}`;\n      }\n\n      if (entityHighlightMapping) {\n        bodyString = highlightEntities(bodyString, entityHighlightMapping);\n      }\n\n      return (\n        <>\n          <HTML\n            content={bodyString}\n            customTags={['pega-email-entity']}\n            aria-label={t('unique_entities', [entityHighlightMapping?.length ?? 0], {\n              count: entityHighlightMapping?.length ?? 0\n            })}\n            role='group'\n          />\n\n          {contextMenu && currentTarget && (\n            <ContextMenuPopover\n              cursorPosition={currentTarget.cursorPosition}\n              contextMenu={{\n                ...contextMenu,\n                items: contextMenuItems,\n                loading: contextMenuLoading,\n                onItemClick\n              }}\n              targetNode={currentTarget.targetNode}\n              show={contextMenuPopoverOpen}\n              ref={setContextMenuPopoverEl}\n            />\n          )}\n        </>\n      );\n    }\n  }, [\n    currentTarget,\n    contextMenu,\n    contextMenuPopoverOpen,\n    contextMenuItems,\n    contextMenuLoading,\n    entityHighlightMapping\n  ]);\n\n  const emailMetaListItems: MetaListProps['items'] = [\n    <Text variant='secondary'>\n      {`${t('to')}: `}\n      <EmailDisplayList emailUsers={to.slice(0, OVERFLOW_TO_EMAIL_COUNT)} showShortName />\n      {to.length > OVERFLOW_TO_EMAIL_COUNT &&\n        `; +${t('more_count', [to.length - OVERFLOW_TO_EMAIL_COUNT])}`}\n    </Text>,\n    <Text variant='secondary'>\n      {`${new Intl.DateTimeFormat(locale, { weekday: 'short' }).format(new Date(timeStamp))}, `}\n      <DateTimeDisplay variant='datetime' format='short' value={timeStamp} />\n    </Text>\n  ];\n\n  useEffect(() => {\n    if (contextMenuPopoverOpen) disableScroll();\n    else enableScroll();\n  }, [contextMenuPopoverOpen]);\n\n  const actions = useMemo(() => {\n    const applicableActions: ReactNode[] = [];\n    if (status !== 'draft') {\n      if (onReply) {\n        applicableActions.push(\n          <Button\n            variant='simple'\n            icon\n            label={t('reply')}\n            onClick={() => {\n              onReply?.(id);\n            }}\n          >\n            <Icon name='reply' />\n          </Button>\n        );\n      }\n      if (onReplyAll) {\n        applicableActions.push(\n          <Button\n            icon\n            variant='simple'\n            label={t('reply_all')}\n            onClick={() => {\n              onReplyAll?.(id);\n            }}\n          >\n            <Icon name='reply-all' />\n          </Button>\n        );\n      }\n      if (onForward) {\n        applicableActions.push(\n          <Button\n            variant='simple'\n            icon\n            label={t('forward')}\n            onClick={() => {\n              onForward?.(id);\n            }}\n          >\n            <Icon name='forward' />\n          </Button>\n        );\n      }\n    }\n    if (status === 'draft') {\n      if (onEditDraft) {\n        applicableActions.push(\n          <Button\n            variant='simple'\n            icon\n            label={t('edit')}\n            onClick={() => {\n              onEditDraft?.(id);\n            }}\n          >\n            <Icon name='pencil' />\n          </Button>\n        );\n      }\n      if (onDeleteDraft) {\n        applicableActions.push(\n          <Button\n            variant='simple'\n            icon\n            label={t('delete')}\n            onClick={() => {\n              onDeleteDraft?.(id);\n            }}\n          >\n            <Icon name='trash' />\n          </Button>\n        );\n      }\n    }\n    return applicableActions;\n  }, [status, onEditDraft, onDeleteDraft, onReply, onReplyAll, onForward]);\n\n  return (\n    <Flex\n      as={StyledEmail}\n      container={{\n        direction: 'column',\n        gap: 1\n      }}\n      ref={ref}\n      {...restProps}\n    >\n      <SummaryItem\n        as={StyledEmailHeader}\n        visual={<Avatar {...from.avatarProps} name={from.fullName} />}\n        ref={headerRef}\n        primary={\n          <Flex\n            container={{\n              gap: 1,\n              alignItems: 'center'\n            }}\n          >\n            <StyledFromEmailDisplay\n              value={from.emailAddress}\n              displayText={from.fullName}\n              variant='text'\n            />\n            {sentiment && <Sentiment {...sentiment} labelHidden />}\n            {status && isSmallOrAbove && (\n              <Status variant={status === 'draft' ? 'pending' : 'urgent'}>\n                {/* Passing mock count so that translation engine select correct form of draft,\n                   with [](second argument) as empty so that count is not shown */}\n                {status === 'draft' ? t('draft', [], { count: 1 }) : t(status)}\n              </Status>\n            )}\n          </Flex>\n        }\n        secondary={\n          <Flex\n            container={{\n              gap: 0,\n              alignItems: 'start',\n              direction: 'column'\n            }}\n          >\n            <Flex\n              container={{\n                gap: 0,\n                alignItems: 'start'\n              }}\n            >\n              <MetaList items={isSmallOrAbove ? emailMetaListItems : [emailMetaListItems[0]]} />\n\n              <Button\n                icon\n                variant='simple'\n                as={StyledEmailMoreInfoButton}\n                ref={setEmailMoreInfoBtnRef}\n                onClick={() => {\n                  setShowEmailMoreInfo(true);\n                }}\n                label={t('show_more')}\n              >\n                <Icon name='arrow-micro-down' />\n              </Button>\n              <Popover\n                as={StyledEmailMoreInfoPopover}\n                show={showEmailMoreInfo}\n                ref={setEmailMoreInfoPopover}\n                target={emailMoreInfoBtnRef}\n                placement='bottom'\n              >\n                <CardContent>\n                  <StyledEmailPrimaryFieldValueList fields={emailMoreInfoFields} />\n                </CardContent>\n              </Popover>\n            </Flex>\n            {!isSmallOrAbove && timeStamp && emailMetaListItems[1]}\n            {status && !isSmallOrAbove && (\n              <Flex container={{ pad: [0.5, 0, 0] }}>\n                <Status variant={status === 'draft' ? 'pending' : 'urgent'}>\n                  {/* Passing mock count so that translation engine select correct form of draft,\n                        with [](second argument) as empty so that count is not shown */}\n                  {status === 'draft' ? t('draft', [], { count: 1 }) : t(status)}\n                </Status>\n              </Flex>\n            )}\n          </Flex>\n        }\n        actions={\n          <Flex\n            as={StyledEmailActions}\n            container={{\n              pad: 1,\n              alignItems: 'center'\n            }}\n          >\n            {...actions}\n          </Flex>\n        }\n      />\n      {banner && <Banner variant='urgent' {...banner} />}\n      <Flex\n        container={{\n          direction: 'column',\n          gap: 2,\n          pad: [0, 2]\n        }}\n        onContextMenu={contextMenu ? onContextMenu : undefined}\n      >\n        {/* Attach the handler only when context menu enabled by providing the prop */}\n        <StyledEmailBody>{renderedBody}</StyledEmailBody>\n        {forwardedContent && forwardedContent.length > 0 && (\n          <>\n            <StyledForwardedContentToggle\n              variant='simple'\n              icon\n              onClick={() => {\n                setShowForwardedContent(prev => !prev);\n              }}\n              label={\n                showForwardedContent\n                  ? t('collapse_forwarded_message')\n                  : t('expand_forwarded_message')\n              }\n              compact\n            >\n              <Icon name='more-alt' />\n            </StyledForwardedContentToggle>\n            {showForwardedContent && <RichTextViewer content={forwardedContent} type='html' />}\n          </>\n        )}\n      </Flex>\n      {secondaryFields.length > 0 && (\n        <Flex\n          container={{\n            pad: [0, 2]\n          }}\n        >\n          <StyledEmailSecondaryFieldValueList fields={secondaryFields} />\n        </Flex>\n      )}\n    </Flex>\n  );\n});\n\nexport default Email;\n"]}