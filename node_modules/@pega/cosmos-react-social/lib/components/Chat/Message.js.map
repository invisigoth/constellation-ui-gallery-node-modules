{"version":3,"file":"Message.js","sourceRoot":"","sources":["../../../src/components/Chat/Message.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  FunctionComponent,\n  forwardRef,\n  PropsWithoutRef,\n  MouseEvent,\n  useEffect,\n  useMemo,\n  useRef\n} from 'react';\n\nimport {\n  Avatar,\n  Flex,\n  Icon,\n  registerIcon,\n  SummaryItem,\n  Image,\n  FlexContainerProps,\n  EmojiDisplay,\n  useI18n,\n  ForwardProps,\n  Actions,\n  Tooltip,\n  useTheme,\n  useElement\n} from '@pega/cosmos-react-core';\nimport * as documentDocIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/document-doc.icon';\nimport * as chainUpIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/chain-up.icon';\nimport * as flagWaveSolidIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/flag-wave-solid.icon';\n\nimport { MessageProps } from './Chat.types';\nimport {\n  StyledMessageContainer,\n  StyledMessageMain,\n  StyledMessageBubble,\n  StyledMessageBubbleContent,\n  StyledMediaList,\n  StyledMediaListItem,\n  StyledMediaThumbNail,\n  StyledSummaryItem,\n  StyledMediaLink,\n  StyledMetaInfoContainer,\n  StyledMetaInfo,\n  StyledBlinkingDot,\n  StyledMediaButton,\n  StyledMessageHeader,\n  StyledMessageHeaderContent,\n  StyledMessageHeaderMeta,\n  StyledUndeliveredIcon,\n  StyledStatusInfo,\n  StyledHeadset,\n  getMessageColors,\n  StyledFlagIcon,\n  StyledHeadsetIconBackground\n} from './Message.styles';\nimport type { AttachmentItemProps } from './Chat.types';\n\nregisterIcon(documentDocIcon, chainUpIcon, flagWaveSolidIcon);\n\nconst Attachment = (props: AttachmentItemProps) => {\n  const { id, icon, name, meta, actions = [], onPreview, thumbnail } = props;\n  const actionRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    const listener = (e: KeyboardEvent) => {\n      if (\n        (e.target as HTMLButtonElement)?.getAttribute('aria-expanded') === 'true' &&\n        ['ArrowLeft', 'ArrowRight', 'ArrowDown', 'ArrowUp'].includes(e.key)\n      ) {\n        e.stopPropagation();\n      }\n    };\n\n    actionRef.current?.addEventListener('keydown', listener);\n\n    return () => {\n      actionRef.current?.removeEventListener('keydown', listener);\n    };\n  }, [actions]);\n\n  return (\n    <Flex\n      key={id}\n      as={StyledMediaListItem}\n      container={{\n        direction: 'column'\n      }}\n    >\n      {thumbnail && (\n        <Image\n          as={StyledMediaThumbNail}\n          src={thumbnail}\n          onClick={(e: MouseEvent) => {\n            e.preventDefault();\n            e.stopPropagation();\n            onPreview?.(id);\n          }}\n          alt={name}\n        />\n      )}\n\n      <SummaryItem\n        as={StyledSummaryItem}\n        primary={\n          <StyledMediaButton\n            onClick={(e: MouseEvent) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onPreview?.(id);\n            }}\n          >\n            {name}\n          </StyledMediaButton>\n        }\n        secondary={meta}\n        visual={<Icon name={icon || 'document-doc'} />}\n        actions={<Actions ref={actionRef} items={actions} iconOnly />}\n      />\n    </Flex>\n  );\n};\n\nconst Message: FunctionComponent<MessageProps & ForwardProps> = forwardRef(function Message(\n  props: PropsWithoutRef<MessageProps>,\n  ref: MessageProps['ref']\n) {\n  const {\n    message,\n    direction,\n    avatarInfo,\n    timestamp,\n    attachments = [],\n    mediaPageLinks = [],\n    status,\n    typing,\n    messageHeader,\n    senderType,\n    senderId,\n    agentVariant,\n    ...restProps\n  } = props;\n\n  const t = useI18n();\n  const theme = useTheme();\n  const [avatarRef, setAvatarRef] = useElement();\n  const { content: messageBubbleBackgroundColor } = useMemo(\n    () => getMessageColors(theme, direction, senderType, agentVariant),\n    [theme, direction, senderType, agentVariant]\n  );\n\n  let messageMetaJustify: FlexContainerProps['justify'] = 'between';\n  if (timestamp && !status) {\n    messageMetaJustify = 'start';\n  } else if (!timestamp && status) {\n    messageMetaJustify = 'end';\n  }\n\n  const renderAvatar = useMemo(() => {\n    if (direction !== 'in' || (senderType !== 'bot' && !avatarInfo)) {\n      return null;\n    }\n\n    if (senderType === 'agent') {\n      return (\n        <>\n          <StyledHeadset>\n            <Avatar\n              name={avatarInfo!.name}\n              size='m'\n              shape='circle'\n              imageSrc={avatarInfo!.imageSrc}\n              ref={setAvatarRef}\n              backgroundColor={messageBubbleBackgroundColor}\n            />\n            <StyledHeadsetIconBackground>\n              <Icon name='headset' />\n            </StyledHeadsetIconBackground>\n          </StyledHeadset>\n          <Tooltip target={avatarRef} showDelay='none' hideDelay='none'>\n            {avatarInfo!.name}\n          </Tooltip>\n        </>\n      );\n    }\n\n    return (\n      <>\n        <Avatar\n          name={avatarInfo ? avatarInfo.name : t('bot')}\n          size='m'\n          shape='circle'\n          icon={!avatarInfo?.imageSrc && senderType === 'bot' ? 'robot-solid' : undefined}\n          imageSrc={avatarInfo?.imageSrc}\n          ref={setAvatarRef}\n          backgroundColor={messageBubbleBackgroundColor}\n        />\n        <Tooltip target={avatarRef} showDelay='none' hideDelay='none'>\n          {avatarInfo ? avatarInfo.name : t('bot')}\n        </Tooltip>\n      </>\n    );\n  }, [avatarInfo, senderType, direction, avatarRef]);\n\n  let ariaLabel: string | undefined;\n  const sender = avatarInfo ? avatarInfo.name : senderType;\n\n  ariaLabel = t('sender_replied_message', [sender, message || '']);\n  if (attachments.length > 0) ariaLabel = t('chat_attachments', [ariaLabel, attachments.length]);\n  if (mediaPageLinks.length > 0) ariaLabel = t('chat_links', [ariaLabel, mediaPageLinks.length]);\n  if (timestamp) ariaLabel = t('chat_message_at_timestamp', [ariaLabel, timestamp]);\n  if (status && direction === 'out') ariaLabel += ` ${t('chat_message_status', [status])}`;\n\n  return (\n    <Flex\n      as={StyledMessageContainer}\n      ref={ref}\n      container={{\n        gap: 1.5,\n        direction: direction === 'in' ? 'row' : 'row-reverse'\n      }}\n      item={{\n        shrink: 0\n      }}\n      hasMessage={!!message}\n      direction={direction}\n      senderType={senderType}\n      typing={typing}\n      messageHeader={messageHeader}\n      status={status}\n      agentVariant={agentVariant}\n      aria-label={ariaLabel}\n      {...restProps}\n    >\n      {renderAvatar}\n      <Flex\n        container={{\n          direction: 'column',\n          alignItems: direction === 'in' ? 'start' : 'end',\n          justify: 'center'\n        }}\n        as={StyledMessageMain}\n      >\n        <Flex\n          container={{\n            direction: direction === 'in' ? 'row' : 'row-reverse',\n            alignItems: 'center',\n            gap: 0.5\n          }}\n        >\n          <StyledMessageBubble>\n            {messageHeader && (\n              <Flex container={{ gap: 0.5, justify: 'between' }} as={StyledMessageHeader}>\n                <Flex container={{ gap: 0.5 }}>\n                  <StyledFlagIcon name='flag-wave-solid' />\n                  <StyledMessageHeaderContent>{messageHeader.content}</StyledMessageHeaderContent>\n                </Flex>\n\n                <StyledMessageHeaderMeta>{messageHeader.meta}</StyledMessageHeaderMeta>\n              </Flex>\n            )}\n\n            {message && (\n              <StyledMessageBubbleContent>\n                <EmojiDisplay content={message} size={20} />\n              </StyledMessageBubbleContent>\n            )}\n\n            {(attachments.length > 0 || mediaPageLinks.length > 0) && (\n              <StyledMediaList>\n                {attachments.map(attachment => {\n                  return <Attachment {...attachment} key={attachment.id} />;\n                })}\n\n                {mediaPageLinks.map(pagePushLink => {\n                  const { id, href, title, thumbnail } = pagePushLink;\n                  return (\n                    <Flex\n                      as={StyledMediaListItem}\n                      key={id}\n                      container={{\n                        direction: 'column'\n                      }}\n                    >\n                      {thumbnail && (\n                        <Image as={StyledMediaThumbNail} src={thumbnail} alt={title || href} />\n                      )}\n                      <SummaryItem\n                        as={StyledSummaryItem}\n                        primary={\n                          <StyledMediaLink\n                            aria-label={title}\n                            href={href}\n                            target='_blank'\n                            rel='noreferrer'\n                          >\n                            {href}\n                          </StyledMediaLink>\n                        }\n                        visual={<Icon name='chain-up' />}\n                      />\n                    </Flex>\n                  );\n                })}\n              </StyledMediaList>\n            )}\n          </StyledMessageBubble>\n\n          {status === 'undeliverable' && message && direction === 'out' && (\n            <StyledUndeliveredIcon name='warn-solid' />\n          )}\n        </Flex>\n\n        {!typing && (\n          <Flex\n            as={StyledMetaInfoContainer}\n            container={{\n              justify: messageMetaJustify,\n              gap: 1.5\n            }}\n          >\n            {timestamp && <StyledMetaInfo>{timestamp}</StyledMetaInfo>}\n            {status && direction === 'out' && <StyledStatusInfo>{t(status)}</StyledStatusInfo>}\n          </Flex>\n        )}\n\n        {typing && (\n          <Flex\n            container={{\n              gap: 0.25\n            }}\n          >\n            <StyledBlinkingDot delay={0} />\n            <StyledBlinkingDot delay={0.25} />\n            <StyledBlinkingDot delay={0.5} />\n          </Flex>\n        )}\n      </Flex>\n    </Flex>\n  );\n});\n\nexport default Message;\n"]}