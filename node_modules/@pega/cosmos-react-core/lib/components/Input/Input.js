import { jsx as _jsx } from "react/jsx-runtime";
import { forwardRef } from 'react';
import FormField from '../FormField';
import { StyledFormControl } from '../FormControl';
import { hasProp, withTestIds } from '../../utils';
import { useTestIds, useUID } from '../../hooks';
import StyledInput from './Input.styles';
import { getInputTestIds } from './Input.test-ids';
const Input = forwardRef(function Input(props, ref) {
    const uid = useUID();
    const { testId, id = uid, value, defaultValue, required = false, disabled = false, readOnly = false, label, additionalInfo, labelHidden, info, status, actions, onResolveSuggestion, ...restProps } = props;
    const testIds = useTestIds(testId, getInputTestIds);
    const controlProp = {};
    // Conditionally render component as controlled/uncontrolled
    if (hasProp(props, 'value')) {
        controlProp.value = value ?? '';
    }
    else if (hasProp(props, 'defaultValue')) {
        controlProp.defaultValue = defaultValue ?? '';
    }
    const Comp = (_jsx(StyledFormControl, { ...{
            'data-testid': testIds.control,
            ref,
            id,
            required,
            disabled,
            readOnly,
            status,
            hasSuggestion: !!onResolveSuggestion && status === 'pending',
            ...controlProp,
            ...restProps,
            as: StyledInput
        } }));
    return label ? (_jsx(FormField, { ...{
            testId: testIds,
            additionalInfo,
            label,
            labelHidden,
            id,
            info,
            readOnly,
            status,
            required,
            disabled,
            actions,
            onResolveSuggestion
        }, children: Comp })) : (Comp);
});
export default withTestIds(Input, getInputTestIds);
//# sourceMappingURL=Input.js.map