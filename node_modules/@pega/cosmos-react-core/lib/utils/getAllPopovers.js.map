{"version":3,"file":"getAllPopovers.js","sourceRoot":"","sources":["../../src/utils/getAllPopovers.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAM,UAAU,GAAG,IAAI,OAAO,EAAwB,CAAC;AAE9D,MAAM,cAAc,GAAG,CAAC,MAAkB,EAAa,EAAE;IACvD,MAAM,QAAQ,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC;IAEtC,IAAI,CAAC,CAAC,QAAQ,YAAY,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,YAAY,gBAAgB,CAAC;QAAE,OAAO,EAAE,CAAC;IAE1F,MAAM,cAAc,GAAG,CAAC,GAAG,MAAM,CAAC,gBAAgB,CAAC,uBAAuB,CAAC,CAAC,CAAC;IAE7E,OAAO,cAAc,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE;QACjC,iDAAiD;QAEjD,uDAAuD;QACvD,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC;YAAE,OAAO,EAAE,CAAC;QAEnC,uDAAuD;QACvD,MAAM,UAAU,GAAG,UAAU,CAAC,GAAG,CAAC,EAAE,CAAE,CAAC;QAEvC,MAAM,QAAQ,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CACxC,QAAQ,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,CACzE,CAAC;QAEF,OAAO,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,GAAG,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7F,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF,eAAe,cAAc,CAAC","sourcesContent":["export const popoverMap = new WeakMap<Element, Set<string>>();\n\nconst getAllPopovers = (parent: ParentNode): Element[] => {\n  const rootNode = parent.getRootNode();\n\n  if (!(rootNode instanceof Document) && !(rootNode instanceof DocumentFragment)) return [];\n\n  const popoverTargets = [...parent.querySelectorAll('[data-popover-target]')];\n\n  return popoverTargets.flatMap(el => {\n    // False positive because popoverMap is exported.\n\n    // eslint-disable-next-line sonarjs/no-empty-collection\n    if (!popoverMap.has(el)) return [];\n\n    // eslint-disable-next-line sonarjs/no-empty-collection\n    const pointerIds = popoverMap.get(el)!;\n\n    const popovers = [...pointerIds].map(id =>\n      rootNode.querySelector(`[data-popover-id=\"${id.replace(/\"/g, '\\\\\"')}\"]`)\n    );\n\n    return popovers.flatMap(popover => (popover ? [popover, ...getAllPopovers(popover)] : []));\n  });\n};\n\nexport default getAllPopovers;\n"]}