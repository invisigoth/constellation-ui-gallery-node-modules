{"version":3,"file":"CaseView.js","sourceRoot":"","sources":["../../../src/components/CaseView/CaseView.tsx"],"names":[],"mappings":";AAAA,OAAO,EAAM,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,eAAe,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAElF,OAAO,EACL,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,YAAY,EACZ,QAAQ,EACR,aAAa,EACb,cAAc,EACd,UAAU,EAEV,IAAI,EACJ,MAAM,EACN,OAAO,EACP,YAAY,EACZ,IAAI,EACJ,qBAAqB,EACrB,iBAAiB,EACjB,uBAAuB,EACvB,gBAAgB,EAChB,UAAU,EACV,WAAW,EACZ,MAAM,yBAAyB,CAAC;AAEjC,OAAO,KAAK,kBAAkB,MAAM,yEAAyE,CAAC;AAC9G,OAAO,KAAK,iBAAiB,MAAM,wEAAwE,CAAC;AAE5G,OAAO,WAAW,MAAM,eAAe,CAAC;AACxC,OAAO,gBAAgB,MAAM,oBAAoB,CAAC;AAClD,OAAO,EACL,gBAAgB,EAChB,uBAAuB,EACvB,cAAc,EACd,cAAc,EACd,uBAAuB,EACvB,aAAa,EACb,uBAAuB,EACvB,eAAe,EACf,mCAAmC,EACnC,sBAAsB,EACvB,MAAM,mBAAmB,CAAC;AAE3B,OAAO,eAAe,MAAM,oBAAoB,CAAC;AACjD,OAAO,iBAAiB,MAAM,qBAAqB,CAAC;AACpD,OAAO,EAAE,kBAAkB,EAAE,MAAM,qBAAqB,CAAC;AAEzD,YAAY,CAAC,kBAAkB,EAAE,iBAAiB,CAAC,CAAC;AAEpD,gFAAgF;AAChF,MAAM,WAAW,GAAG,CAAC,UAA0B,EAAE,UAA0B,EAAE,EAAE;IAC7E,UAAU,CAAC,KAAK,CAAC,cAAc,CAAC,0BAA0B,CAAC,CAAC;IAE5D,6FAA6F;IAC7F,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,CAC1E,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC,KAAK,KAAK,CAAC,CACnD,CAAC;IAEF,yEAAyE;IACzE,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC;QAAE,OAAO;IAEhC,qFAAqF;IACrF,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IAE3C,IAAI,CAAC,KAAK;QAAE,OAAO;IAEnB,MAAM,YAAY,GAAG,UAAU,CAAC,qBAAqB,EAAE,CAAC;IACxD,MAAM,SAAS,GAAG,KAAK,CAAC,qBAAqB,EAAE,CAAC;IAChD,MAAM,QAAQ,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC;IACvD,MAAM,kBAAkB,GAAG,SAAS,CAAC,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC;IAC1D,MAAM,uBAAuB;IAC3B,wDAAwD;IACxD,MAAM,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,IAAI,KAAK,CAAC;IAErF,iDAAiD;IACjD,MAAM,2BAA2B,GAAG,YAAY,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;IAE3E,gFAAgF;IAChF,iDAAiD;IACjD,UAAU,CAAC,KAAK,CAAC,WAAW,CAC1B,0BAA0B,EAC1B,YACE,QAAQ,GAAG,kBAAkB,GAAG,2BAClC,QAAQ,uBAAuB,aAAa,CAC7C,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,QAAQ,GAAqC,CAAC,EAClD,MAAM;AAEN,uDAAuD;AACvD,MAAM,EACN,OAAO,EACP,UAAU,EACV,QAAQ,EACR,WAAW,EACX,IAAI,EACJ,QAAQ,EACR,gBAAgB,EAChB,MAAM,EACN,OAAO,EACP,eAAe;AAEf,kCAAkC;AAClC,aAAa,EACb,eAAe,EAAE,mBAAmB,GAAG,IAAI,EAC3C,eAAe;AAEf,YAAY;AACZ,IAAI,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,YAAY,EAAE,OAAO,EAAE,UAAU,EAAE;AAEhE,iCAAiC;AACjC,OAAO,EACP,MAAM,EACN,KAAK,EACL,UAAU,EAAE,cAAc,GAAG,EAAE;AAE/B,oCAAoC;AACpC,SAAS,EACT,qBAAqB,EACrB,iBAAiB,EAAE,qBAAqB,GAAG,IAAI,EAC/C,iBAAiB;AAEjB,SAAS;AACT,iBAAiB,EACjB,mBAAmB,EACnB,SAAS,GAAG,KAAK,EACjB,GAAG,SAAS,EACE,EAAE,EAAE;IAClB,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC;IAEvD,qBAAqB;IACrB,MAAM,CAAC,GAAG,OAAO,EAAE,CAAC;IACpB,MAAM,SAAS,GAAG,YAAY,EAAE,CAAC;IACjC,MAAM,EAAE,SAAS,EAAE,GAAG,gBAAgB,EAAE,CAAC;IAEzC,eAAe;IACf,MAAM,WAAW,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;IACjD,MAAM,UAAU,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;IAChD,iGAAiG;IACjG,MAAM,WAAW,GAAG,MAAM,EAA8B,CAAC;IACzD,MAAM,eAAe,GAAG,MAAM,CAAoB,IAAI,CAAC,CAAC;IACxD,MAAM,qBAAqB,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IAE5C,cAAc;IACd,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,UAAU,CAAc,IAAI,CAAC,CAAC;IAEtE,sBAAsB;IACtB,MAAM,SAAS,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;IACtC,MAAM,SAAS,GAAG,aAAa,CAAC,IAAI,EAAE,EAAE,aAAa,EAAE,WAAW,EAAE,CAAC,CAAC;IACtE,MAAM,SAAS,GAAG,aAAa,CAAC,IAAI,EAAE,EAAE,aAAa,EAAE,WAAW,EAAE,CAAC,CAAC;IACtE,MAAM,SAAS,GAAG,aAAa,CAAC,IAAI,EAAE,EAAE,aAAa,EAAE,WAAW,EAAE,CAAC,CAAC;IAEtE,UAAU;IACV,MAAM,YAAY,GAAG,YAAY,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IACzC,MAAM,YAAY,GAAG,WAAW,MAAM,EAAE,CAAC;IACzC,MAAM,cAAc,GAAG,aAAa,MAAM,EAAE,CAAC;IAC7C,MAAM,sBAAsB,GAAG,sBAAsB,MAAM,EAAE,CAAC;IAE9D,yBAAyB;IACzB,IAAI,eAAe,GAAG,CAAC,SAAS,IAAI,CAAC,CAAC,mBAAmB,CAAC;IAE1D,IAAI,iBAAiB,EAAE;QACrB,eAAe,GAAG,SAAS,CAAC;KAC7B;IAED,iCAAiC;IACjC,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,WAAW,CAAC,OAAO;YAAE,OAAO;QAEjC,IAAI,SAAS,CAAC,OAAO,EAAE;YACrB,uBAAuB,CAAC,WAAW,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;SACvD;aAAM;YACL,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;SAC1B;IACH,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEb,2BAA2B;IAE3B,qGAAqG;IACrG,8IAA8I;IAC9I,MAAM,CAAC,yBAAyB,EAAE,4BAA4B,CAAC,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC;IAEtF,yFAAyF;IACzF,eAAe,CAAC,GAAG,EAAE;QACnB,IAAI,SAAS;YAAE,4BAA4B,CAAC,IAAI,CAAC,CAAC;IACpD,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,iGAAiG;IACjG,MAAM,wBAAwB,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IAE/C,yGAAyG;IACzG,MAAM,iBAAiB,GAAG,yBAAyB,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,KAAK,CAAC;IAEpF,uDAAuD;IACvD,qBAAqB,CAAC,GAAG,EAAE;QACzB,0IAA0I;QAC1I,IAAI,SAAS,IAAI,CAAC,SAAS,IAAI,qBAAqB,EAAE;YACpD,iBAAiB,EAAE,EAAE,CAAC;YACtB,wBAAwB,CAAC,OAAO,GAAG,IAAI,CAAC;SACzC;QAED,IAAI,SAAS,EAAE;YACb,IAAI,wBAAwB,CAAC,OAAO,IAAI,CAAC,qBAAqB,EAAE;gBAC9D,iBAAiB,EAAE,EAAE,CAAC;aACvB;YAED,wBAAwB,CAAC,OAAO,GAAG,KAAK,CAAC;SAC1C;QACD,sHAAsH;IACxH,CAAC,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;IAE3B,yFAAyF;IACzF,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,qBAAqB,CAAC,OAAO,EAAE;YACjC,eAAe,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC;SAClC;QAED,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE;YAC5B,+BAA+B;YAC/B,qBAAqB,CAAC,OAAO,GAAG,KAAK,CAAC;SACvC;IACH,CAAC,EAAE,CAAC,iBAAiB,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;IAE9C,eAAe;IACf,MAAM,CAAC,QAAQ,EAAE,UAAU,CAAC,GAAG,OAAO,CAAC,GAAG,EAAE;QAC1C,MAAM,UAAU,GAAG,EAAE,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC;QAC5D,MAAM,iBAAiB,GAAG;YACxB,EAAE,EAAE,YAAY;YAChB,OAAO,EAAE,CACP,KAAC,IAAI,cACH,KAAC,uBAAuB,cACtB,KAAC,iBAAiB,OAAK,aAAa,GAAI,GAChB,GACrB,CACR;SACF,CAAC;QAEF,IAAI,KAAK,GAAG,YAAY,CAAC;QACzB,IAAI,OAAO,GAAG,cAAc,CAAC;QAE7B,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,eAAe,IAAI,CAAC,iBAAiB,IAAI,CAAC,SAAS,CAAC,EAAE;gBACzD,KAAK,GAAG,CAAC,UAAU,EAAE,GAAG,YAAY,CAAC,CAAC;gBACtC,OAAO,GAAG,CAAC,iBAAiB,EAAE,GAAG,cAAc,CAAC,CAAC;aAClD;YAED,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;SACzB;QAED,MAAM,gBAAgB,GAAG,EAAE,CAAC;QAC5B,MAAM,kBAAkB,GAAG,EAAE,CAAC;QAE9B,IAAI,SAAS,EAAE;YACb,gBAAgB,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;YACpE,kBAAkB,CAAC,IAAI,CAAC;gBACtB,EAAE,EAAE,cAAc;gBAClB,OAAO,EAAE,KAAC,IAAI,IAAC,SAAS,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,EAAE,YAAG,SAAS,GAAQ;aAC9E,CAAC,CAAC;SACJ;QAED,IAAI,iBAAiB,EAAE;YACrB,gBAAgB,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,sBAAsB,EAAE,IAAI,EAAE,iBAAiB,CAAC,KAAK,EAAE,CAAC,CAAC;YACrF,kBAAkB,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,sBAAsB,EAAE,OAAO,EAAE,iBAAiB,EAAE,OAAO,EAAE,CAAC,CAAC;SAC9F;QAED,KAAK,GAAG,CAAC,UAAU,EAAE,GAAG,YAAY,EAAE,GAAG,gBAAgB,CAAC,CAAC;QAC3D,OAAO,GAAG,CAAC,iBAAiB,EAAE,GAAG,cAAc,EAAE,GAAG,kBAAkB,CAAC,CAAC;QAExE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IAC1B,CAAC,EAAE;QACD,YAAY;QACZ,YAAY;QACZ,SAAS;QACT,eAAe;QACf,iBAAiB;QACjB,SAAS;QACT,cAAc;QACd,SAAS;QACT,cAAc;QACd,sBAAsB;KACvB,CAAC,CAAC;IAEH,oBAAoB;IACpB,IAAI,qBAAqB,GAAG;QAC1B,IAAI,EAAE,gBAAgB;QACtB,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,6BAA6B;QACnC,KAAK,EAAE;;;KAGN;KACF,CAAC;IAEF,MAAM,eAAe,GAAG;QACtB,MAAM,EAAE,CAAC;QACT,IAAI,EAAE,qBAAqB,CAAC,IAAI;KACjC,CAAC;IAEF,IAAI,iBAAiB,EAAE;QACrB,IAAI,SAAS,EAAE;YACb,qBAAqB,GAAG;gBACtB,GAAG,eAAe;gBAClB,IAAI,EAAE,yEAAyE;gBAC/E,KAAK,EAAE,iDAAiD;aACzD,CAAC;SACH;aAAM,IAAI,SAAS,EAAE;YACpB,qBAAqB,GAAG;gBACtB,GAAG,eAAe;gBAClB,IAAI,EAAE,kDAAkD;gBACxD,KAAK,EAAE;;;SAGN;aACF,CAAC;SACH;KACF;SAAM,IAAI,eAAe,EAAE;QAC1B,IAAI,SAAS,EAAE;YACb,qBAAqB,GAAG;gBACtB,GAAG,eAAe;gBAClB,IAAI,EAAE,8DAA8D;gBACpE,KAAK,EAAE,+BAA+B;aACvC,CAAC;SACH;KACF;SAAM,IAAI,SAAS,EAAE;QACpB,qBAAqB,GAAG;YACtB,GAAG,eAAe;YAClB,IAAI,EAAE,uCAAuC;YAC7C,KAAK,EAAE;;;WAGF;SACN,CAAC;KACH;IAED,uBAAuB;IACvB,MAAM,kBAAkB,GAAG,MAAM,CAAmD;QAClF,QAAQ,EAAE,EAAE;KACb,CAAC,CAAC;IAEH,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,EAAE;QAC/B,IAAI,iBAAiB,IAAI,WAAW,CAAC,OAAO,EAAE;YAC5C,OAAO,UAAU,CACf,MAAM,CAAC,gBAAgB,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,CACnF,CAAC;SACH;QAED,OAAO,CAAC,CAAC;IACX,CAAC,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;IAE1B,cAAc;IACZ,mDAAmD;IACnD,SAAS,CAAC,CAAC,CAAC,EAAE,GAAG,kBAAkB,CAAC,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC,SAAS,CAC/E,CAAC;IAEF,iCAAiC;IACjC,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,SAAS,EAAE;YACb,UAAU,CAAC,YAAY,CAAC,CAAC;SAC1B;IACH,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,wBAAwB;IACxB,SAAS,CAAC,GAAG,EAAE;QACb,IACE,SAAS;YACT,eAAe;YACf,CAAC,iBAAiB;YAClB,CAAC,YAAY,KAAK,YAAY,IAAI,YAAY,KAAK,cAAc,CAAC,EAClE;YACA,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SACjC;QACD,iCAAiC;QACjC,IAAI,SAAS,IAAI,CAAC,cAAc,EAAE,sBAAsB,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;YAChF,UAAU,CAAC,YAAY,CAAC,CAAC;SAC1B;IACH,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,kCAAkC;IAClC,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,SAAS,IAAI,YAAY,KAAK,YAAY,EAAE;YAC/C,UAAU,CAAC,YAAY,CAAC,CAAC;SAC1B;aAAM,IAAI,SAAS,IAAI,YAAY,KAAK,YAAY,EAAE;YACrD,UAAU,CAAC,YAAY,CAAC,CAAC;SAC1B;IACH,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,wBAAwB;IACxB,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,SAAS,EAAE;YACb,UAAU,CAAC,YAAY,CAAC,CAAC;SAC1B;IACH,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,wBAAwB;IACxB,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,eAAe,IAAI,YAAY,KAAK,YAAY,EAAE;YACpD,UAAU,CAAC,YAAY,CAAC,CAAC;SAC1B;IACH,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC;IAEtB,yDAAyD;IACzD,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,YAAY;YAAE,OAAO;QAC1B,MAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC;QACjC,MAAM,YAAY,GAAG,QAAQ,CAAC,eAAe,CAAC,YAAY,CAAC;QAC3D,MAAM,SAAS,GAAG,SAAS,GAAG,YAAY,GAAG,GAAG,CAAC;QACjD,MAAM,aAAa,GAAG,YAAY,CAAC,SAAS,CAAC;QAC7C,IAAI,aAAa,GAAG,SAAS,EAAE;YAC7B,MAAM,GAAG,GAAG,aAAa,GAAG,YAAY,GAAG,GAAG,CAAC;YAC/C,MAAM,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;SAC9C;IACH,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;IAEnB,2GAA2G;IAC3G,eAAe,CAAC,GAAG,EAAE;QACnB,IAAI,CAAC,WAAW,CAAC,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO;YAAE,OAAO;QAExD,WAAW,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CACnC,kBAAkB,EAClB,GAAG,CAAC,eAAe,CAAC,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAC9D,CAAC;IACJ,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC;IAEtB,yBAAyB;IACzB,oGAAoG;IACpG,mEAAmE;IACnE,MAAM,QAAQ,GAAyB;QACrC,OAAO;QACP,MAAM;QACN,OAAO;QACP,UAAU;QACV,QAAQ;QACR,WAAW;QACX,IAAI;QACJ,QAAQ;QACR,gBAAgB;QAChB,OAAO;QACP,eAAe;QACf,MAAM;QACN,aAAa;QACb,IAAI,EAAE;YACJ,KAAK,EAAE,QAAQ;YACf,OAAO,EAAE,UAAU;YACnB,YAAY;SACb;QACD,MAAM;QACN,KAAK;QACL,iBAAiB;QACjB,mBAAmB;QACnB,eAAe;QACf,iBAAiB;QACjB,eAAe;QACf,SAAS;QACT,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;KACnB,CAAC;IAEF,MAAM,kBAAkB,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;IAExD,+DAA+D;IAC/D,eAAe,CAAC,GAAG,EAAE;QACnB,IAAI,CAAC,kBAAkB,CAAC,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO;YAAE,OAAO;QAEhE,MAAM,iBAAiB,GAAG,kBAAkB,CAAC,OAAO,CAAC;QACrD,MAAM,UAAU,GAAG,WAAW,CAAC,OAAO,CAAC;QAEvC,WAAW,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;QAE3C,MAAM,WAAW,GAAG,GAAG,EAAE;YACvB,WAAW,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;QAC7C,CAAC,CAAC;QAEF,iBAAiB;QACjB,MAAM,EAAE,GAAG,IAAI,gBAAgB,CAAC,GAAG,EAAE;YACnC,WAAW,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QAElE,iBAAiB,CAAC,gBAAgB,CAAC,oBAAoB,EAAE,WAAW,CAAC,CAAC;QAEtE,OAAO,GAAG,EAAE;YACV,EAAE,CAAC,UAAU,EAAE,CAAC;YAChB,iBAAiB,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,WAAW,CAAC,CAAC;QAC3E,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,MAAM,CAAC,oBAAoB,EAAE,uBAAuB,CAAC,GAAG,UAAU,CAAiB,IAAI,CAAC,CAAC;IAEzF,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,oBAAoB;YAAE,OAAO;QAElC,MAAM,QAAQ,GAAG,IAAI,cAAc,CAAC,GAAG,EAAE;YACvC,IAAI,CAAC,kBAAkB,CAAC,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO;gBAAE,OAAO;YAEhE,WAAW,CAAC,kBAAkB,CAAC,OAAO,EAAE,WAAW,CAAC,OAAO,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QAEvC,OAAO,GAAG,EAAE;YACV,QAAQ,CAAC,UAAU,EAAE,CAAC;QACxB,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,oBAAoB,CAAC,CAAC,CAAC;IAE3B,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,QAAQ,GAAG,GAAG,EAAE;YACpB,IAAI,CAAC,kBAAkB,CAAC,OAAO,IAAI,CAAC,WAAW,CAAC,OAAO;gBAAE,OAAO;YAEhE,WAAW,CAAC,kBAAkB,CAAC,OAAO,EAAE,WAAW,CAAC,OAAO,CAAC,CAAC;QAC/D,CAAC,CAAC;QAEF,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAE5C,OAAO,GAAG,EAAE;YACV,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACjD,CAAC,CAAC;IACJ,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,gBAAgB,GAAG,CACvB,KAAC,sBAAsB,IAAC,OAAO,EAAC,IAAI,YAAE,CAAC,CAAC,WAAW,CAAC,GAA0B,CAC/E,CAAC;IAEF,MAAM,qBAAqB,GAAG,CAC5B,KAAC,mCAAmC,IAClC,OAAO,QACP,IAAI,QACJ,KAAK,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC,gBACvC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC,wBAAwB,CAAC,EACxF,OAAO,EAAE,GAAG,EAAE;YACZ,IAAI,CAAC,yBAAyB,IAAI,qBAAqB,EAAE;gBACvD,4BAA4B,CAAC,IAAI,CAAC,CAAC;aACpC;iBAAM;gBACL,iBAAiB,EAAE,EAAE,CAAC;aACvB;QACH,CAAC,EACD,OAAO,EAAE,GAAG,EAAE;YACZ,qBAAqB,CAAC,OAAO,GAAG,IAAI,CAAC;QACvC,CAAC,EACD,MAAM,EAAE,GAAG,EAAE;YACX,qBAAqB,CAAC,OAAO,GAAG,KAAK,CAAC;QACxC,CAAC,EACD,GAAG,EAAE,eAAe,YAEpB,KAAC,IAAI,IAAC,IAAI,EAAC,kBAAkB,GAAG,GACI,CACvC,CAAC;IAEF,gBAAgB;IAChB,OAAO,CACL,8BACE,KAAC,eAAe,CAAC,QAAQ,IAAC,KAAK,EAAE,QAAQ,YAEvC,MAAC,IAAI,mBACU,OAAO,CAAC,IAAI,KACrB,SAAS,EACb,EAAE,EAAE,cAAc,EAClB,GAAG,EAAE,WAAW,EAChB,SAAS,EAAE,qBAAqB,EAChC,IAAI,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,aAG3B,KAAC,IAAI,IACH,EAAE,EAAE,aAAa,EACjB,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,EACzB,OAAO,EAAE,SAAS,IAAI,CAAC,CAAC,iBAAiB,IAAI,SAAS,CAAC,IAAI,CAAC,eAAe,EAC3E,cAAc,EAAE,SAAS,EACzB,GAAG,EAAE,UAAU,YAEf,KAAC,WAAW,KAAG,GACV,EAGP,MAAC,IAAI,IACH,SAAS,EAAE;gCACT,SAAS,EAAE,QAAQ;gCACnB,YAAY,EAAE,OAAO;gCACrB,MAAM,EAAE,CAAC;6BACV,EACD,EAAE,EAAE,cAAc,EAClB,iBAAiB,EAAE,OAAO,CAAC,iBAAiB,CAAC,EAC7C,GAAG,EAAE,CAAC,EAAkB,EAAE,EAAE;gCAC1B,WAAW,CAAC,OAAO,GAAG,EAAE,CAAC;gCACzB,IAAI,EAAE;oCAAE,kBAAkB,CAAC,OAAO,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;4BACxD,CAAC,aAEA,CAAC,OAAO,IAAI,MAAM,IAAI,KAAK,CAAC,IAAI,CAC/B,MAAC,IAAI,IACH,SAAS,EAAE;wCACT,SAAS,EAAE,QAAQ;wCACnB,YAAY,EAAE,OAAO;wCACrB,MAAM,EAAE,CAAC;qCACV,EACD,GAAG,EAAE,uBAAuB,aAE3B,OAAO,IAAI,6BAAkB,OAAO,CAAC,OAAO,YAAG,OAAO,GAAO,EAC7D,MAAM,IAAI,6BAAkB,OAAO,CAAC,MAAM,YAAG,MAAM,GAAO,EAC1D,KAAK,IAAI,6BAAkB,OAAO,CAAC,KAAK,YAAG,KAAK,GAAO,IACnD,CACR,EAEA,CAAC,CAAC,SAAS,IAAI,CAAC,iBAAiB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CACxE,KAAC,IAAI,mBACU,OAAO,CAAC,IAAI,EACzB,IAAI,EAAE,QAAQ,EACd,UAAU,EAAE,UAAU,EACtB,YAAY,EAAE,YAAY,GAC1B,CACH,EAED,cAAK,GAAG,EAAE,eAAe,YACtB,UAAU,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CACpC,KAAC,QAAQ,mBACM,YAAY,KAAK,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,EACjE,YAAY,EAAE,YAAY,EAC1B,KAAK,EAAE,EAAE,EAET,GAAG,EAAE,YAAY,KAAK,EAAE,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,SAAS,YAExD,OAAO,IAHH,EAAE,CAIE,CACZ,CAAC,GACE,IACD,EAGN,iBAAiB,IAAI,SAAS,IAAI,CACjC,KAAC,IAAI,IAAC,EAAE,EAAE,uBAAuB,EAAE,IAAI,EAAE,EAAE,IAAI,EAAE,mBAAmB,EAAE,qCACnE,iBAAiB,CAAC,OAAO,GACrB,CACR,EAGA,SAAS,IAAI,SAAS,IAAI,CAAC,SAAS,IAAI,iBAAiB,IAAI,CAC5D,KAAC,MAAM,IACL,EAAE,EAAE,gBAAgB,EACpB,IAAI,EAAE,iBAAiB,EACvB,QAAQ,EAAC,OAAO,EAChB,SAAS,EAAE,SAAS,CAAC,GAAG,EACxB,MAAM,QACN,cAAc,QACd,oBAAoB,EAAE,CAAC,CAAC,iBAAiB,YAEzC,MAAC,IAAI,IACH,EAAE,EAAE,uBAAuB,EAC3B,SAAS,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,EAAE,sCAG1C,MAAC,IAAI,IAAC,SAAS,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,aAC1D,gBAAgB,EAChB,qBAAqB,IACjB,EAEN,SAAS,IACL,GACA,CACV,EAGA,SAAS,IAAI,SAAS,IAAI,CACzB,MAAC,IAAI,mBACU,OAAO,CAAC,SAAS,EAC9B,GAAG,EAAE,CAAC,EAAkB,EAAE,EAAE;gCAC1B,IAAI,EAAE;oCAAE,kBAAkB,CAAC,OAAO,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;4BACxD,CAAC,EACD,EAAE,EAAE,eAAe,EACnB,SAAS,EAAE;gCACT,IAAI,EAAE,gBAAgB;gCACtB,MAAM,EAAE,CAAC;6BACV,EACD,IAAI,EAAE;gCACJ,IAAI,EAAE,WAAW;6BAClB,qBACgB,SAAS,IAAI,CAAC,iBAAiB,IAAI,SAAS,gBACjD,CAAC,CAAC,iBAAiB,CAAC,aAEhC,MAAC,IAAI,IACH,SAAS,EAAE;wCACT,UAAU,EAAE,QAAQ;wCACpB,OAAO,EAAE,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ;qCAClD,aAEA,gBAAgB,EAChB,CAAC,SAAS,IAAI,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,qBAAqB,IAC1D,EAEN,iBAAiB,IAAI,SAAS,IAAI,SAAS,EAE3C,CAAC,CAAC,iBAAiB,IAAI,CAAC,SAAS,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CACpD,KAAC,gBAAgB,IAAC,KAAK,EAAE,qBAAqB,GAAI,CACnD,IACI,CACR,IACI,GACkB,EAC1B,mBAAmB,IACnB,CACJ,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,WAAW,CAAC,QAAQ,EAAE,kBAAkB,CAAC,CAAC","sourcesContent":["import { FC, useEffect, useMemo, useRef, useLayoutEffect, useState } from 'react';\n\nimport {\n  Flex,\n  Grid,\n  Icon,\n  registerIcon,\n  TabPanel,\n  useBreakpoint,\n  useScrollStick,\n  useElement,\n  ForwardProps,\n  Card,\n  Drawer,\n  useI18n,\n  useDirection,\n  Tabs,\n  useAfterInitialEffect,\n  windowIsAvailable,\n  focusHeadingOrContainer,\n  useConfiguration,\n  useTestIds,\n  withTestIds\n} from '@pega/cosmos-react-core';\nimport { ScrollStickOptions } from '@pega/cosmos-react-core/lib/hooks/useScrollStick';\nimport * as moveRightSolidIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/move-right-solid.icon';\nimport * as moveLeftSolidIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/move-left-solid.icon';\n\nimport CaseSummary from './CaseSummary';\nimport UtilitiesSummary from './UtilitiesSummary';\nimport {\n  StyledCaseDrawer,\n  StyledCaseDrawerContent,\n  StyledCaseView,\n  StyledWorkArea,\n  StyledPersistentUtility,\n  StyledSummary,\n  StyledSummaryTabContent,\n  StyledUtilities,\n  StyledExpandCollapseUtilitiesButton,\n  StyledUtilitiesHeading\n} from './CaseView.styles';\nimport { CaseViewContextValue, CaseViewProps } from './CaseView.types';\nimport CaseViewContext from './CaseView.context';\nimport CaseSummaryFields from './CaseSummaryFields';\nimport { getCaseViewTestIds } from './CaseView.test-ids';\n\nregisterIcon(moveRightSolidIcon, moveLeftSolidIcon);\n\n// This function is responsible for auto sizing table height in case tab panels.\nconst resizeTable = (tabPanelEl: HTMLDivElement, workAreaEl: HTMLDivElement) => {\n  tabPanelEl.style.removeProperty('--content-height-in-view');\n\n  // .rs-wrapper is currently the class used by the table component which needs to be targeted.\n  const tables = Array.from(tabPanelEl.querySelectorAll('.rs-wrapper')).filter(\n    table => table.getBoundingClientRect().width !== 0\n  );\n\n  // Only perform this logic when there is a single table in a tab's panel.\n  if (tables.length !== 1) return;\n\n  // This selector finds the table's root element as they are always wrapped in a Card.\n  const table = tables[0].closest('article');\n\n  if (!table) return;\n\n  const tabPanelRect = tabPanelEl.getBoundingClientRect();\n  const tableRect = table.getBoundingClientRect();\n  const vpHeight = document.documentElement.clientHeight;\n  const tableRectOffsetTop = tableRect.top + window.scrollY;\n  const workAreaPaddingBlockEnd =\n    // px unit are required for proper CSS calc calculation.\n    window.getComputedStyle(workAreaEl).getPropertyValue('padding-block-end') || '0px';\n\n  // Accounts for content rendered after the table.\n  const tableBottomToTabPanelBottom = tabPanelRect.bottom - tableRect.bottom;\n\n  // Sets a CSS variable for available height based on screen size and view state.\n  // Defines an available minimum height of ~600px.\n  tabPanelEl.style.setProperty(\n    '--content-height-in-view',\n    `max(calc(${\n      vpHeight - tableRectOffsetTop - tableBottomToTabPanelBottom\n    }px - ${workAreaPaddingBlockEnd}), 37.5rem)`\n  );\n};\n\nconst CaseView: FC<CaseViewProps & ForwardProps> = ({\n  testId,\n\n  // Case data mostly visually related to the case header\n  caseId,\n  heading,\n  subheading,\n  caseLink,\n  parentCases,\n  icon,\n  followed,\n  onFollowedChange,\n  onEdit,\n  actions,\n  promotedActions,\n\n  // Summary content and state props\n  summaryFields,\n  summaryExpanded: summaryExpandedProp = true,\n  onToggleSummary,\n\n  // Case tabs\n  tabs: { currentTabId, items: tabItemsProp, onClick: onTabClick },\n\n  // Workarea related content props\n  banners,\n  stages,\n  tasks,\n  tabContent: tabContentProp = [],\n\n  // Utilities content and state props\n  utilities,\n  utilitiesSummaryItems,\n  utilitiesExpanded: utilitiesExpandedProp = true,\n  onToggleUtilities,\n\n  // Etc...\n  persistentUtility,\n  intelligentGuidance,\n  isPreview = false,\n  ...restProps\n}: CaseViewProps) => {\n  const testIds = useTestIds(testId, getCaseViewTestIds);\n\n  // General util hooks\n  const t = useI18n();\n  const direction = useDirection();\n  const { loadedRef } = useConfiguration();\n\n  // Element refs\n  const caseViewRef = useRef<HTMLDivElement>(null);\n  const summaryRef = useRef<HTMLDivElement>(null);\n  // undefined used to allow ref to be mutable. Element set below in ref callback for scroll stick.\n  const workAreaRef = useRef<HTMLDivElement | undefined>();\n  const toggleButtonRef = useRef<HTMLButtonElement>(null);\n  const isToggleButtonFocused = useRef(false);\n\n  // Tab content\n  const [tabContentEl, setTabContentEl] = useElement<HTMLElement>(null);\n\n  // Breakpoint booleans\n  const smOrAbove = useBreakpoint('sm');\n  const mdOrAbove = useBreakpoint('md', { breakpointRef: caseViewRef });\n  const lgOrAbove = useBreakpoint('lg', { breakpointRef: caseViewRef });\n  const xlOrAbove = useBreakpoint('xl', { breakpointRef: caseViewRef });\n\n  // DOM ids\n  const initialTabId = tabItemsProp[0]?.id;\n  const summaryTabId = `summary-${caseId}`;\n  const utilitiesTabId = `utilities-${caseId}`;\n  const persistentUtilityTabId = `persistent-utility-${caseId}`;\n\n  // Summary state handling\n  let summaryExpanded = !isPreview && !!summaryExpandedProp;\n\n  if (persistentUtility) {\n    summaryExpanded = xlOrAbove;\n  }\n\n  // Focus heading on initial mount\n  useEffect(() => {\n    if (!caseViewRef.current) return;\n\n    if (loadedRef.current) {\n      focusHeadingOrContainer(caseViewRef.current, heading);\n    } else {\n      loadedRef.current = true;\n    }\n  }, [caseId]);\n\n  // Utilities state handling\n\n  // Used in coordination with a layoutEffect below to determine the utilities state on initial render.\n  // Attempted with a ref but it did not work. Using state and enforcing a render in addition to the change render for lgOrAbove seems to fix...\n  const [obeyUtilitiesExpandedProp, setObeyUtilitiesExpandedProp] = useState(lgOrAbove);\n\n  // Allow the utilitiesExpandedProp to drive the utilities' state after the initial render\n  useLayoutEffect(() => {\n    if (lgOrAbove) setObeyUtilitiesExpandedProp(true);\n  }, [lgOrAbove]);\n\n  // Tracks whether a resize forced the onToggleUtilities to close the utilities when it's a drawer\n  const utilitiesToggledByResize = useRef(false);\n\n  // If the initial render is within the MD size, where the utility drawer renders, it must begin collapsed\n  const utilitiesExpanded = obeyUtilitiesExpandedProp ? utilitiesExpandedProp : false;\n\n  // Handles utilities state based on breakpoint changes.\n  useAfterInitialEffect(() => {\n    // If we change into the MD breakpoint range and the utilities state is expanded call the toggle prop to collapse it with controlled state\n    if (mdOrAbove && !lgOrAbove && utilitiesExpandedProp) {\n      onToggleUtilities?.();\n      utilitiesToggledByResize.current = true;\n    }\n\n    if (lgOrAbove) {\n      if (utilitiesToggledByResize.current && !utilitiesExpandedProp) {\n        onToggleUtilities?.();\n      }\n\n      utilitiesToggledByResize.current = false;\n    }\n    // Purposely not listing utilitiesExpanded as a dependency as it is not a trigger and will be captured when BPs change\n  }, [mdOrAbove, lgOrAbove]);\n\n  // Handles focus of toggle button when toggled in drawer mode and when browser is resized\n  useEffect(() => {\n    if (isToggleButtonFocused.current) {\n      toggleButtonRef.current?.focus();\n    }\n\n    if (!toggleButtonRef.current) {\n      // Toggle button is not on DOM.\n      isToggleButtonFocused.current = false;\n    }\n  }, [utilitiesExpanded, mdOrAbove, lgOrAbove]);\n\n  // Prepare tabs\n  const [tabItems, tabContent] = useMemo(() => {\n    const summaryTab = { id: summaryTabId, name: t('summary') };\n    const summaryTabContent = {\n      id: summaryTabId,\n      content: (\n        <Card>\n          <StyledSummaryTabContent>\n            <CaseSummaryFields {...summaryFields} />\n          </StyledSummaryTabContent>\n        </Card>\n      )\n    };\n\n    let items = tabItemsProp;\n    let content = tabContentProp;\n\n    if (mdOrAbove) {\n      if (!summaryExpanded || (persistentUtility && !xlOrAbove)) {\n        items = [summaryTab, ...tabItemsProp];\n        content = [summaryTabContent, ...tabContentProp];\n      }\n\n      return [items, content];\n    }\n\n    const utilityTabsItems = [];\n    const utilityTabsContent = [];\n\n    if (utilities) {\n      utilityTabsItems.push({ id: utilitiesTabId, name: t('utilities') });\n      utilityTabsContent.push({\n        id: utilitiesTabId,\n        content: <Flex container={{ direction: 'column', gap: 2 }}>{utilities}</Flex>\n      });\n    }\n\n    if (persistentUtility) {\n      utilityTabsItems.push({ id: persistentUtilityTabId, name: persistentUtility.title });\n      utilityTabsContent.push({ id: persistentUtilityTabId, content: persistentUtility?.content });\n    }\n\n    items = [summaryTab, ...tabItemsProp, ...utilityTabsItems];\n    content = [summaryTabContent, ...tabContentProp, ...utilityTabsContent];\n\n    return [items, content];\n  }, [\n    tabItemsProp,\n    summaryTabId,\n    mdOrAbove,\n    summaryExpanded,\n    persistentUtility,\n    xlOrAbove,\n    tabContentProp,\n    utilities,\n    utilitiesTabId,\n    persistentUtilityTabId\n  ]);\n\n  // Grid layout props\n  let caseViewGridContainer = {\n    cols: 'minmax(0, 1fr)',\n    colGap: 0,\n    rows: 'minmax(0, max-content) auto',\n    areas: `\n      \"summary\"\n      \"work-area\"\n    `\n  };\n\n  const sharedGridProps = {\n    colGap: 2,\n    rows: caseViewGridContainer.rows\n  };\n\n  if (persistentUtility) {\n    if (xlOrAbove) {\n      caseViewGridContainer = {\n        ...sharedGridProps,\n        cols: 'minmax(0, max-content) minmax(0, 1fr) repeat(2, minmax(0, max-content))',\n        areas: '\"summary work-area persistentUtility utilities\"'\n      };\n    } else if (mdOrAbove) {\n      caseViewGridContainer = {\n        ...sharedGridProps,\n        cols: 'minmax(0, 1fr) repeat(2, minmax(0, max-content))',\n        areas: `\n          \"summary summary summary\"\n          \"work-area persistentUtility utilities\"\n        `\n      };\n    }\n  } else if (summaryExpanded) {\n    if (mdOrAbove) {\n      caseViewGridContainer = {\n        ...sharedGridProps,\n        cols: 'minmax(0, max-content) minmax(0, 1fr) minmax(0, max-content)',\n        areas: '\"summary work-area utilities\"'\n      };\n    }\n  } else if (mdOrAbove) {\n    caseViewGridContainer = {\n      ...sharedGridProps,\n      cols: 'minmax(0, 1fr) minmax(0, max-content)',\n      areas: `\n            \"summary summary\"\n            \"work-area utilities\"\n          `\n    };\n  }\n\n  // Apply sticky columns\n  const scrollStickOptions = useRef<ScrollStickOptions & { elements: HTMLElement[] }>({\n    elements: []\n  });\n\n  const stickOffset = useMemo(() => {\n    if (windowIsAvailable && caseViewRef.current) {\n      return parseFloat(\n        window.getComputedStyle(caseViewRef.current).getPropertyValue('--appshell-offset')\n      );\n    }\n\n    return 0;\n  }, [caseViewRef.current]);\n\n  useScrollStick(\n    // isMediumOrAbove means side by side columns | | |\n    mdOrAbove ? { ...scrollStickOptions.current, offset: stickOffset } : undefined\n  );\n\n  // Preview set summary tab active\n  useEffect(() => {\n    if (isPreview) {\n      onTabClick(summaryTabId);\n    }\n  }, []);\n\n  // Initial tab selection\n  useEffect(() => {\n    if (\n      mdOrAbove &&\n      summaryExpanded &&\n      !persistentUtility &&\n      (currentTabId === summaryTabId || currentTabId === utilitiesTabId)\n    ) {\n      onTabClick(tabItemsProp[0]?.id);\n    }\n    // Toggle utilities tab selection\n    if (mdOrAbove && [utilitiesTabId, persistentUtilityTabId].includes(currentTabId)) {\n      onTabClick(initialTabId);\n    }\n  }, [mdOrAbove]);\n\n  // Initial / summary tab selection\n  useEffect(() => {\n    if (!smOrAbove && currentTabId === initialTabId) {\n      onTabClick(summaryTabId);\n    } else if (smOrAbove && currentTabId === summaryTabId) {\n      onTabClick(initialTabId);\n    }\n  }, [smOrAbove]);\n\n  // Summary tab selection\n  useEffect(() => {\n    if (isPreview) {\n      onTabClick(summaryTabId);\n    }\n  }, [isPreview]);\n\n  // Initial tab selection\n  useEffect(() => {\n    if (summaryExpanded && currentTabId === summaryTabId) {\n      onTabClick(initialTabId);\n    }\n  }, [summaryExpanded]);\n\n  // Handles scrolling to tab content for newly clicked tab\n  useEffect(() => {\n    if (!tabContentEl) return;\n    const scrollPos = window.scrollY;\n    const windowHeight = document.documentElement.clientHeight;\n    const bottomPos = scrollPos + windowHeight * 0.8;\n    const tabContentPos = tabContentEl.offsetTop;\n    if (tabContentPos > bottomPos) {\n      const top = tabContentPos - windowHeight * 0.2;\n      window.scrollTo({ top, behavior: 'smooth' });\n    }\n  }, [currentTabId]);\n\n  // We need a css variable for the height of the case summary when it is collapsed into a header like layout\n  useLayoutEffect(() => {\n    if (!caseViewRef.current || !summaryRef.current) return;\n\n    caseViewRef.current.style.setProperty(\n      '--summary-height',\n      `${!summaryExpanded ? summaryRef.current.offsetHeight : 0}px`\n    );\n  }, [summaryExpanded]);\n\n  // CaseView context value\n  // Choosing not to memo for now due to extent of deps and how often they change. Optimize as needed.\n  // eslint-disable-next-line react/jsx-no-constructed-context-values\n  const ctxValue: CaseViewContextValue = {\n    testIds,\n    caseId,\n    heading,\n    subheading,\n    caseLink,\n    parentCases,\n    icon,\n    followed,\n    onFollowedChange,\n    actions,\n    promotedActions,\n    onEdit,\n    summaryFields,\n    tabs: {\n      items: tabItems,\n      onClick: onTabClick,\n      currentTabId\n    },\n    stages,\n    tasks,\n    persistentUtility,\n    intelligentGuidance,\n    summaryExpanded,\n    utilitiesExpanded,\n    onToggleSummary,\n    isPreview,\n    aboveSM: smOrAbove,\n    aboveMD: mdOrAbove,\n    aboveLG: lgOrAbove,\n    aboveXL: xlOrAbove\n  };\n\n  const currentTabPanelRef = useRef<HTMLDivElement>(null);\n\n  // The following effects are dedicated to resizeTable handling.\n  useLayoutEffect(() => {\n    if (!currentTabPanelRef.current || !workAreaRef.current) return;\n\n    const currentTabPanelEl = currentTabPanelRef.current;\n    const workAreaEl = workAreaRef.current;\n\n    resizeTable(currentTabPanelEl, workAreaEl);\n\n    const onTabChange = () => {\n      resizeTable(currentTabPanelEl, workAreaEl);\n    };\n\n    // TODO: optimize\n    const mo = new MutationObserver(() => {\n      resizeTable(currentTabPanelEl, workAreaEl);\n    });\n\n    mo.observe(currentTabPanelEl, { childList: true, subtree: true });\n\n    currentTabPanelEl.addEventListener('cosmos-tab-changed', onTabChange);\n\n    return () => {\n      mo.disconnect();\n      currentTabPanelEl.removeEventListener('cosmos-tab-changed', onTabChange);\n    };\n  });\n\n  const [bannersStagesTasksEl, setBannersStagesTasksEl] = useElement<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (!bannersStagesTasksEl) return;\n\n    const observer = new ResizeObserver(() => {\n      if (!currentTabPanelRef.current || !workAreaRef.current) return;\n\n      resizeTable(currentTabPanelRef.current, workAreaRef.current);\n    });\n\n    observer.observe(bannersStagesTasksEl);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [bannersStagesTasksEl]);\n\n  useEffect(() => {\n    const onResize = () => {\n      if (!currentTabPanelRef.current || !workAreaRef.current) return;\n\n      resizeTable(currentTabPanelRef.current, workAreaRef.current);\n    };\n\n    window.addEventListener('resize', onResize);\n\n    return () => {\n      window.removeEventListener('resize', onResize);\n    };\n  }, []);\n\n  const utilitiesHeading = (\n    <StyledUtilitiesHeading variant='h2'>{t('utilities')}</StyledUtilitiesHeading>\n  );\n\n  const utilitiesToggleButton = (\n    <StyledExpandCollapseUtilitiesButton\n      compact\n      icon\n      label={t(utilitiesExpanded ? 'collapse' : 'expand')}\n      aria-label={t(utilitiesExpanded ? 'collapse_utilities_panel' : 'expand_utilities_panel')}\n      onClick={() => {\n        if (!obeyUtilitiesExpandedProp && utilitiesExpandedProp) {\n          setObeyUtilitiesExpandedProp(true);\n        } else {\n          onToggleUtilities?.();\n        }\n      }}\n      onFocus={() => {\n        isToggleButtonFocused.current = true;\n      }}\n      onBlur={() => {\n        isToggleButtonFocused.current = false;\n      }}\n      ref={toggleButtonRef}\n    >\n      <Icon name='arrow-micro-left' />\n    </StyledExpandCollapseUtilitiesButton>\n  );\n\n  // Here we go...\n  return (\n    <>\n      <CaseViewContext.Provider value={ctxValue}>\n        {/* Root element */}\n        <Grid\n          data-testid={testIds.root}\n          {...restProps}\n          as={StyledCaseView}\n          ref={caseViewRef}\n          container={caseViewGridContainer}\n          item={{ area: 'case-view' }}\n        >\n          {/* Summary */}\n          <Grid\n            as={StyledSummary}\n            item={{ area: 'summary' }}\n            desktop={mdOrAbove && (!persistentUtility || xlOrAbove) && !summaryExpanded}\n            isLargeOrAbove={lgOrAbove}\n            ref={summaryRef}\n          >\n            <CaseSummary />\n          </Grid>\n\n          {/* Work area */}\n          <Flex\n            container={{\n              direction: 'column',\n              alignContent: 'start',\n              rowGap: 2\n            }}\n            as={StyledWorkArea}\n            persistentUtility={Boolean(persistentUtility)}\n            ref={(el: HTMLDivElement) => {\n              workAreaRef.current = el;\n              if (el) scrollStickOptions.current?.elements.push(el);\n            }}\n          >\n            {(banners || stages || tasks) && (\n              <Flex\n                container={{\n                  direction: 'column',\n                  alignContent: 'start',\n                  rowGap: 2\n                }}\n                ref={setBannersStagesTasksEl}\n              >\n                {banners && <div data-testid={testIds.banners}>{banners}</div>}\n                {stages && <div data-testid={testIds.stages}>{stages}</div>}\n                {tasks && <div data-testid={testIds.tasks}>{tasks}</div>}\n              </Flex>\n            )}\n\n            {(!mdOrAbove || (persistentUtility && !xlOrAbove) || !summaryExpanded) && (\n              <Tabs\n                data-testid={testIds.tabs}\n                tabs={tabItems}\n                onTabClick={onTabClick}\n                currentTabId={currentTabId}\n              />\n            )}\n\n            <div ref={setTabContentEl}>\n              {tabContent?.map(({ id, content }) => (\n                <TabPanel\n                  data-testid={currentTabId === id ? testIds.tabContent : undefined}\n                  currentTabId={currentTabId}\n                  tabId={id}\n                  key={id}\n                  ref={currentTabId === id ? currentTabPanelRef : undefined}\n                >\n                  {content}\n                </TabPanel>\n              ))}\n            </div>\n          </Flex>\n\n          {/* Persistent utility column */}\n          {persistentUtility && mdOrAbove && (\n            <Grid as={StyledPersistentUtility} item={{ area: 'persistentUtility' }} data-app-region>\n              {persistentUtility.content}\n            </Grid>\n          )}\n\n          {/* Utility drawer */}\n          {utilities && mdOrAbove && !lgOrAbove && utilitiesExpanded && (\n            <Drawer\n              as={StyledCaseDrawer}\n              open={utilitiesExpanded}\n              position='fixed'\n              placement={direction.end}\n              shadow\n              nullWhenClosed\n              hasPersistentUtility={!!persistentUtility}\n            >\n              <Flex\n                as={StyledCaseDrawerContent}\n                container={{ direction: 'column', gap: 2 }}\n                data-app-region\n              >\n                <Flex container={{ alignItems: 'center', justify: 'between' }}>\n                  {utilitiesHeading}\n                  {utilitiesToggleButton}\n                </Flex>\n\n                {utilities}\n              </Flex>\n            </Drawer>\n          )}\n\n          {/* Utilities */}\n          {utilities && mdOrAbove && (\n            <Grid\n              data-testid={testIds.utilities}\n              ref={(el: HTMLDivElement) => {\n                if (el) scrollStickOptions.current?.elements.push(el);\n              }}\n              as={StyledUtilities}\n              container={{\n                cols: 'minmax(0, 1fr)',\n                rowGap: 2\n              }}\n              item={{\n                area: 'utilities'\n              }}\n              data-app-region={lgOrAbove || !utilitiesExpanded || undefined}\n              aria-label={t('utilities_label')}\n            >\n              <Flex\n                container={{\n                  alignItems: 'center',\n                  justify: utilitiesExpanded ? 'between' : 'center'\n                }}\n              >\n                {utilitiesHeading}\n                {!lgOrAbove && utilitiesExpanded ? null : utilitiesToggleButton}\n              </Flex>\n\n              {utilitiesExpanded && lgOrAbove && utilities}\n\n              {(!utilitiesExpanded || (mdOrAbove && !lgOrAbove)) && (\n                <UtilitiesSummary items={utilitiesSummaryItems} />\n              )}\n            </Grid>\n          )}\n        </Grid>\n      </CaseViewContext.Provider>\n      {intelligentGuidance}\n    </>\n  );\n};\n\nexport default withTestIds(CaseView, getCaseViewTestIds);\n"]}